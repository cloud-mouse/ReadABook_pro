(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74a168d3"],{"1b93":function(e,t,a){},"1fad":function(e,t,a){"use strict";a("3b87")},"3b87":function(e,t,a){},"7bae":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"-list main-content"},[a("div",{staticClass:"screen-box"},[a("div",{staticClass:"screen-item"},[a("el-input",{staticStyle:{width:"220px"},attrs:{size:"small",placeholder:"请输入关键词",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.fetchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-search",type:"primary"},nativeOn:{click:function(t){return e.fetchData(t)}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"operation"},[a("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.showDialog("add")}}},[e._v("新增")])],1)]),e._v(" "),a("div",{staticClass:"content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.load,expression:"load"}],staticStyle:{width:"100%"},attrs:{data:e.List,fit:"","highlight-current-row":"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"100",type:"index"}}),e._v(" "),a("el-table-column",{attrs:{label:"设计师头像/姓名",align:"lefts"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{src:t.row.avatar_url,width:"60",height:"60",alt:""}}),e._v(" "),a("span",{staticStyle:{display:"inline-block","vertical-align":"middle","margin-left":"10px"}},[e._v(e._s(t.row._name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"_phone",label:"手机号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"设计师状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e._f("statusFilter")(t.row.status)}},[e._v(e._s(0==t.row.status?"已禁用":"已启用"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设计师账号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e._f("statusFilter")(t.row.is_active)}},[e._v(e._s(0==t.row.is_active?"未激活":"已激活"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否启用",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{staticClass:"changes-status",attrs:{"active-value":1,"inactive-value":0,disabled:""},nativeOn:{click:function(a){return e.switchTab(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},nativeOn:{click:function(a){return e.showDialog("detail",t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row._id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{total:e.total,"current-page":e.currentPage,"page-sizes":[5,10,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{center:"",title:"add"==e.dialogType?"新增设计师":"edit"==e.dialogType?"编辑设计师":"设计师详情",visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px","label-position":"right",size:"small"}},[a("el-form-item",{attrs:{label:"设计师姓名",prop:"users_name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"detail"==e.dialogType},model:{value:e.form.users_name,callback:function(t){e.$set(e.form,"users_name",t)},expression:"form.users_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设计师手机号",prop:"users_phone"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"detail"==e.dialogType},model:{value:e.form.users_phone,callback:function(t){e.$set(e.form,"users_phone",t)},expression:"form.users_phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设计师头像",prop:"logo"}},[a("el-upload",{staticClass:"logo-uploader",attrs:{action:e.baseUrl+"/design/uploadImg",name:"image",headers:{design_sign:e.token},"file-list":e.fileList,"with-credentials":!0,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,disabled:"detail"==e.dialogType}},[e.imageUrl?a("img",{staticClass:"logo",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus logo-uploader-icon"})])],1),e._v(" "),a("el-form-item",["detail"!==e.dialogType?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")]):e._e(),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("关闭")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{center:"",title:"创建成功",visible:e.resaultDialog,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(t){e.resaultDialog=t}}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("p",[e._v("登录账号："+e._s(e.reasultData.users_phone))]),e._v(" "),a("p",[e._v("登录密码："+e._s(e.reasultData.default_password))])])],1)],1)},i=[],r=a("b775");function n(e){return Object(r["a"])({url:"/design/designerList",method:"get",params:e})}function l(e){return Object(r["a"])({url:"/design/addUsers",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/design/delUsers",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/design/setEnabled",method:"post",data:e})}var c=a("61f7"),d=a("5f87"),f={filters:{statusFilter:function(e){var t={0:"danger",1:"success"};return t[e]}},data:function(){var e=this,t=function(e,t,a){Object(c["b"])(t)?a():a(new Error("手机号不正确"))},a=function(t,a,s){"add"===e.dialogType&&""===e.form.password?s(new Error("请输入密码")):s()};return{load:!0,keywords:"",baseUrl:"http://212.129.244.20:3000",usersList:[],fileList:[{name:"image",url:""}],token:Object(d["a"])(),multipleSelection:[],dialogFormVisible:!1,resaultDialog:!1,form:{users_name:"",users_phone:"",avatar_url:"",status:0},imageUrl:"",reasultData:{},pageSize:10,currentPage:1,total:0,rules:{users_team_name:[{required:!0,message:"请填写团队名称",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}],users_name:[{required:!0,message:"请填写设计师姓名",trigger:"blur"}],users_phone:[{required:!0,trigger:"blur",validator:t}],password:[{trigger:"blur",validator:a}]},dialogType:"add"}},watch:{dialogFormVisible:function(e){!1===e&&(this.$refs["form"].resetFields(),this.form={users_name:"",users_phone:"",avatar_url:""},this.imageUrl="")}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this;n({pageSize:this.pageSize,currentPage:this.currentPage}).then((function(t){e.load=!1,e.usersList=t.data.data,e.total=t.data.count}))},showDialog:function(e,t){this.dialogType=e,this.dialogFormVisible=!0,t&&t.users_id&&(this.form.users_id=t.users_id,this.form.users_name=t.users_name,this.form.users_phone=t.users_phone,this.form.status=t.status,this.form.avatar_url=t.avatar_url,this.imageUrl=t.avatar_url)},onSubmit:function(e){var t=this,a=this;a.$refs[e].validate((function(s){if(!s)return!1;l(a.form).then((function(a){0===a.code?(t.$message({type:"success",message:a.msg||"添加成功!"}),t.$nextTick((function(){t.$refs[e].resetFields(),t.$refs[e].clearFiles()})),t.reasultData=a.data,t.dialogFormVisible=!1,t.resaultDialog=!0,t.fetchData()):t.$message.success(a.msg||"添加失败!")}))}))},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw),this.form.avatar_url=e.data},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},handleCurrentChange:function(e){this.currentPage=e,this.fetchData()},handleSizeChange:function(e){this.pageSize=e,this.fetchData()},switchTab:function(e){var t=this;this.$confirm("是否".concat(0===e.status?"启用":"禁用","该设计师账号?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:"danger"}).then((function(){u({users_id:e.users_id,status:0===e.status?"1":"0"}).then((function(a){t.$message({type:"success",message:a.msg}),0===e.status?e.status=1:e.status=0}))})).catch((function(){t.$message({type:"info",message:"已取消!"})}))},handleDelete:function(e){var t=this;this.$confirm("是否删除该设计师账号?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:"danger"}).then((function(){o({users_id:e}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.fetchData()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},m=f,g=(a("cd6b"),a("1fad"),a("2877")),p=Object(g["a"])(m,s,i,!1,null,"bd0f59b4",null);t["default"]=p.exports},cd6b:function(e,t,a){"use strict";a("1b93")}}]);